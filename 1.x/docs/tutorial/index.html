
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Tutorial 1.x - DCL</title>
  <meta name="author" content="Eugene Lazutkin">

  
  <meta name="description" content="Tutorial 1.x Jul 29th, 2012 12:01 am Version 1.x This file is written using a literate JavaScript. You can download
this tutorial to use as a local &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.dcljs.org/1.x/docs/tutorial">
  <link href="/favicon.ico" rel="icon">
  <link href="/fav144.png" rel="apple-touch-icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="DCL" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-33552109-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body     class="collapse-sidebar" >
  <header role="banner"><hgroup>
  <h1><a href="/">DCL</a></h1>
  
    <h2>An elegant OOP with mixins + AOP for JavaScript.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="www.dcljs.org">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="/docs">Docs</a></li>
	<li><a href="/support">Support</a></li>
	<li><a href="/blog/archives">Archives</a></li>
	<li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article role="article">
  
  <header>
    <h1 class="entry-title">Tutorial 1.x</h1>
    <p class="meta">




<time class='entry-date' datetime='2012-07-29T00:01:00-05:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>29</span><span class='date-suffix'>th</span>, <span class='date-year'>2012</span></span> <span class='time'>12:01 am</span></time></p>
  </header>
  
  <div class="docco">
  <p><em>Version 1.x</em></p>

<p><em>This file is written using a literate JavaScript. You can download
<a href="/1.x/downloads/code/tutorial.js">this tutorial</a> to use as a local reference
or to run it locally.</em></p>

<p><em>If you prefer to see text as inline comments, just click on a sidebar
handle at the far right.</em></p>

<p><em>While <code>dcl</code> works great in browsers using an AMD loader or
even simple <code>&lt;script&gt;</code>, this tutorial is assumed to be run with
<a href="http://nodejs.org">node.js</a>.</em></p>

<p>For our examples we will need the main <a href="./dcl_js">dcl</a> module:</p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">dcl</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;dcl&quot;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<h2>Inheritance, and constructors</h2>

<p>Let&rsquo;s declare a class derived from Object:</p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">Person</span> <span class="o">=</span> <span class="nx">dcl</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p>Name of class. It is optional, but highly recommended,
because it will help while debugging your objects.</p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'>  <span class="nx">declaredClass</span><span class="o">:</span> <span class="s2">&quot;Person&quot;</span><span class="p">,</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p>A default name as a class-level constant:</p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'>  <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;Anonymous&quot;</span><span class="p">,</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p>A constructor is a method named &hellip; <code>constructor</code></p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'>  <span class="nx">constructor</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">){</span>
</span><span class='line'>    <span class="k">if</span><span class="p">(</span><span class="nx">name</span><span class="p">){</span>
</span><span class='line'>      <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Person &quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s2">&quot; is created&quot;</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p>We can derive more classes from it using single inheritance.
Let&rsquo;s define a bureaucrat (yes, it is a person too!):</p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">Bureaucrat</span> <span class="o">=</span> <span class="nx">dcl</span><span class="p">(</span><span class="nx">Person</span><span class="p">,</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">declaredClass</span><span class="o">:</span> <span class="s2">&quot;Bureaucrat&quot;</span><span class="p">,</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p>Remember that all inherited constructors are chained in automatically!</p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'>  <span class="nx">constructor</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">){</span>
</span><span class='line'>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Bureaucrat &quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s2">&quot; is created&quot;</span><span class="p">);</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>  <span class="nx">approve</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nb">document</span><span class="p">){</span>
</span><span class='line'>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Rejected by &quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span> <span class="c1">// NEVER!</span>
</span><span class='line'>    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p>Now we can create a typical anonymous clerk:</p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">clerk</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Bureaucrat</span><span class="p">();</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p>Output:<br>
<code>Person Anonymous is created</code><br>
<code>Bureaucrat Anonymous is created</code></p>

<p>Let&rsquo;s ask him to approve something:</p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">clerk</span><span class="p">.</span><span class="nx">approve</span><span class="p">(</span><span class="mi">123</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p>Output:<br><code>Rejected by Anonymous</code></p>

<p>As you can see it is trivial to define &ldquo;classes&rdquo;,
and derive them using single inheritance.</p>

<p>Constructors are automatically chained and called
from the farthest to the closest with the same arguments.
Our Bureaucrat&rsquo;s constructor ignores name, because
it knows that Person will take care of it.</p>

<h2>Mixins</h2>

<p>Let&rsquo;s declare one more class that will be used as a mixin.
Any normal class would do.</p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">Speaker</span> <span class="o">=</span> <span class="nx">dcl</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">speak</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">msg</span><span class="p">){</span>
</span><span class='line'>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s2">&quot;: &quot;</span> <span class="o">+</span> <span class="nx">msg</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p>Now we are ready to create Talker from Person + Speaker:</p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">Talker</span> <span class="o">=</span> <span class="nx">dcl</span><span class="p">([</span><span class="nx">Person</span><span class="p">,</span> <span class="nx">Speaker</span><span class="p">],</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p>It has no own methods for simplicity.</p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'>  <span class="p">{}</span>
</span><span class='line'><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p>Let&rsquo;s create Alice, who is a Talker:
<code>Person Alice is created</code></p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">alice</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Talker</span><span class="p">(</span><span class="s2">&quot;Alice&quot;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p><code>Alice: hello!</code></p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">alice</span><span class="p">.</span><span class="nx">speak</span><span class="p">(</span><span class="s2">&quot;hello!&quot;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<h2>Supercalls</h2>

<p>Let&rsquo;s declare another mixin, this time using a super call:</p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">Shouter</span> <span class="o">=</span> <span class="nx">dcl</span><span class="p">(</span><span class="nx">Speaker</span><span class="p">,</span> <span class="p">{</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p>Here we use the double function technique to inject
<code>sup</code> &ndash; a method from a super class.</p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'>  <span class="nx">speak</span><span class="o">:</span> <span class="nx">dcl</span><span class="p">.</span><span class="nx">superCall</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">sup</span><span class="p">){</span>
</span><span class='line'>    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">msg</span><span class="p">){</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p>Theoretically it is possible that
there is no super method &ndash; we can be the last in line;
not in this case, though &ndash; we are based
on Speaker meaning it will be always pulled in.</p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="nx">sup</span><span class="p">){</span>
</span><span class='line'>        <span class="nx">sup</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">());</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>    <span class="p">};</span>
</span><span class='line'>  <span class="p">})</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p>Let&rsquo;s create a Shouter called Sarge.</p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">Sarge</span> <span class="o">=</span> <span class="nx">dcl</span><span class="p">([</span><span class="nx">Talker</span><span class="p">,</span> <span class="nx">Shouter</span><span class="p">],</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p>It has no own methods for simplicity.</p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'>  <span class="p">{}</span>
</span><span class='line'><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p><code>Person Bob is created</code></p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">bob</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Sarge</span><span class="p">(</span><span class="s2">&quot;Bob&quot;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p><code>Bob: GIVE ME TWENTY!</code></p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">bob</span><span class="p">.</span><span class="nx">speak</span><span class="p">(</span><span class="s2">&quot;give me twenty!&quot;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p>The double function technique for a super call allows you
to work directly with a next method in chain &ndash;
no intermediaries means that this call is as fast as
it can be, no run-time penalties are involved during method
calls, and it greatly simplifies debugging.</p>

<h2>Anonymous one-off classes</h2>

<p>And, of course, our &ldquo;classes&rdquo; can be absolutely anonymous, like in this one-off &ldquo;class&rdquo;:</p>

<p><code>Person Loud Bob is created</code></p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">loudBob</span> <span class="o">=</span> <span class="k">new</span> <span class="p">(</span><span class="nx">dcl</span><span class="p">([</span><span class="nx">Talker</span><span class="p">,</span> <span class="nx">Shouter</span><span class="p">],</span> <span class="p">{}))(</span><span class="s2">&quot;Loud Bob&quot;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p><code>Loud Bob: ANYBODY HOME?</code></p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">loudBob</span><span class="p">.</span><span class="nx">speak</span><span class="p">(</span><span class="s2">&quot;Anybody home?&quot;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<h2>AOP</h2>

<p>We can use aspect-oriented advices to create our &ldquo;classes&rdquo;
using <a href="./dcl_js/advise">dcl.advise()</a>.</p>

<p>Let&rsquo;s create one more mixin:</p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">Sick</span> <span class="o">=</span> <span class="nx">dcl</span><span class="p">(</span><span class="nx">Person</span><span class="p">,</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">speak</span><span class="o">:</span> <span class="nx">dcl</span><span class="p">.</span><span class="nx">advise</span><span class="p">({</span>
</span><span class='line'>    <span class="nx">before</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">msg</span><span class="p">){</span>
</span><span class='line'>      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s2">&quot;: *hiccup* *hiccup*&quot;</span><span class="p">);</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>    <span class="nx">after</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">args</span><span class="p">,</span> <span class="nx">result</span><span class="p">){</span>
</span><span class='line'>      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s2">&quot;: *sniffle* I am sick!&quot;</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">})</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p>Now we can create Sick Talker.</p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">SickTalker</span> <span class="o">=</span> <span class="nx">dcl</span><span class="p">([</span><span class="nx">Talker</span><span class="p">,</span> <span class="nx">Sick</span><span class="p">],</span> <span class="p">{});</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p><code>Person Clara is created</code></p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">clara</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SickTalker</span><span class="p">(</span><span class="s2">&quot;Clara&quot;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p><code>Clara: *hiccup* *hiccup*</code><br>
<code>Clara: I want a glass of water!</code><br>
<code>Clara: *sniffle* I am sick!</code></p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">clara</span><span class="p">.</span><span class="nx">speak</span><span class="p">(</span><span class="s2">&quot;I want a glass of water!&quot;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p>Hmm, both <code>Talker</code> and <code>Sick</code> require the same &ldquo;class&rdquo;
<code>Person</code>. How is it going to work? Don&rsquo;t worry,
all duplicates are going to be eliminated by
the underlying C3 MRO algorithm. Read all about it in
the documentation.</p>

<p>Of course we can use an &ldquo;around&rdquo; advice as well, and
it will behave just like a super call above. It will require
the same double function technique to inject a method
from a super class.</p>

<p>One more mixin, this time using a shortcut
<a href="./dcl_js/around">dcl.around()</a>:</p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">Martian</span> <span class="o">=</span> <span class="nx">dcl</span><span class="p">(</span><span class="nx">Speaker</span><span class="p">,</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">speak</span><span class="o">:</span> <span class="nx">dcl</span><span class="p">.</span><span class="nx">around</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">sup</span><span class="p">){</span>
</span><span class='line'>    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">msg</span><span class="p">){</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="nx">sup</span><span class="p">){</span>
</span><span class='line'>        <span class="nx">sup</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">&quot;beep-beep-beep&quot;</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>    <span class="p">};</span>
</span><span class='line'>  <span class="p">})</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p>Now we are ready for&hellip;</p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">SickMartianSarge</span> <span class="o">=</span> <span class="nx">dcl</span><span class="p">([</span><span class="nx">Sarge</span><span class="p">,</span> <span class="nx">Sick</span><span class="p">,</span> <span class="nx">Martian</span><span class="p">],</span> <span class="p">{});</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p><code>Person Don is created</code></p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">don</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SickMartianSarge</span><span class="p">(</span><span class="s2">&quot;Don&quot;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p><code>Don: *hiccup* *hiccup*</code><br>
<code>Don: BEEP-BEEP-BEEP</code><br>
<code>Don: *sniffle* I am sick!</code></p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">don</span><span class="p">.</span><span class="nx">speak</span><span class="p">(</span><span class="s2">&quot;Doctor? Nurse? Anybody?&quot;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p>For convenience, <code>dcl</code> provides shortcuts for
all singular advices. Read all about it in
<a href="./dcl_js">the documentation</a>.</p>

<h2>Chaining</h2>

<p>While constructors are chained by default,
you can chain any method you like. Usually
it works well for lifecycle methods,
and event-like methods.</p>

<p>Waker-upper and sleeper:</p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">BioOrganism</span> <span class="o">=</span> <span class="nx">dcl</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{});</span>
</span><span class='line'><span class="nx">dcl</span><span class="p">.</span><span class="nx">chainAfter</span><span class="p">(</span><span class="nx">BioOrganism</span><span class="p">,</span> <span class="s2">&quot;wakeUp&quot;</span><span class="p">);</span>
</span><span class='line'><span class="nx">dcl</span><span class="p">.</span><span class="nx">chainBefore</span><span class="p">(</span><span class="nx">BioOrganism</span><span class="p">,</span> <span class="s2">&quot;sleep&quot;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p>Now <code>wakeUp()</code> and <code>sleep()</code> are automatically chained.</p>

<p>Note that we don&rsquo;t need to define methods to declare
them chained.</p>

<p>Our handy mixins:</p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">SwitchOperator</span> <span class="o">=</span> <span class="nx">dcl</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">wakeUp</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;turn on lights&quot;</span><span class="p">);</span> <span class="p">},</span>
</span><span class='line'>  <span class="nx">sleep</span><span class="o">:</span>  <span class="kd">function</span><span class="p">(){</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;turn off lights&quot;</span><span class="p">);</span> <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">TeethBrusher</span> <span class="o">=</span> <span class="nx">dcl</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">wakeUp</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;brush my teeth&quot;</span><span class="p">);</span> <span class="p">},</span>
</span><span class='line'>  <span class="nx">sleep</span><span class="o">:</span>  <span class="kd">function</span><span class="p">(){</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;brush my teeth again&quot;</span><span class="p">);</span> <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">SmartDresser</span> <span class="o">=</span> <span class="nx">dcl</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">wakeUp</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;dress up for work&quot;</span><span class="p">);</span> <span class="p">},</span>
</span><span class='line'>  <span class="nx">sleep</span><span class="o">:</span>  <span class="kd">function</span><span class="p">(){</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;switch to pajamas&quot;</span><span class="p">);</span> <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p>All together now:</p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">OfficeWorker</span> <span class="o">=</span> <span class="nx">dcl</span><span class="p">(</span>
</span><span class='line'>    <span class="p">[</span><span class="nx">BioOrganism</span><span class="p">,</span> <span class="nx">SwitchOperator</span><span class="p">,</span>
</span><span class='line'>     <span class="nx">TeethBrusher</span><span class="p">,</span> <span class="nx">SmartDresser</span><span class="p">],</span>
</span><span class='line'>  <span class="p">{}</span>
</span><span class='line'><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">ethel</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OfficeWorker</span><span class="p">();</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p>Ethel&rsquo;s morning ritual:<br>
<code>turn on lights</code><br>
<code>brush my teeth</code><br>
<code>dress up for work</code></p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">ethel</span><span class="p">.</span><span class="nx">wakeUp</span><span class="p">();</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p>Ethel&rsquo;s evening ritual:<br>
<code>switch to pajamas</code><br>
<code>brush my teeth again</code><br>
<code>turn off lights</code></p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">ethel</span><span class="p">.</span><span class="nx">sleep</span><span class="p">();</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p>As you can see chaining allows to do our ritual actions
in the correct order. So we don&rsquo;t need to worry for Ethel
to brush her teeth in a dark.</p>

<h2>Advising objects</h2>

<p>While class-level AOP is static, we can always advise
any method dynamically, and unadvise it at will.</p>

<p>Let&rsquo;s implement the previous example with object-level AOP.
For that we need to use a new module <a href="./advise_js">dcl/advise</a>:</p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">advise</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;dcl/advise&quot;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p>Let&rsquo;s use a one-off class this time:</p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">fred</span> <span class="o">=</span> <span class="k">new</span> <span class="p">(</span><span class="nx">dcl</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">wakeUp</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span> <span class="cm">/* nothing */</span> <span class="p">},</span>
</span><span class='line'>  <span class="nx">sleep</span><span class="o">:</span>  <span class="kd">function</span><span class="p">(){</span> <span class="cm">/* nothing */</span> <span class="p">}</span>
</span><span class='line'><span class="p">}))();</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">wakeAd1</span> <span class="o">=</span> <span class="nx">advise</span><span class="p">(</span><span class="nx">fred</span><span class="p">,</span> <span class="s2">&quot;wakeUp&quot;</span><span class="p">,</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">before</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;turn on lights&quot;</span><span class="p">);</span> <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">wakeAd2</span> <span class="o">=</span> <span class="nx">advise</span><span class="p">(</span><span class="nx">fred</span><span class="p">,</span> <span class="s2">&quot;wakeUp&quot;</span><span class="p">,</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">before</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;brush my teeth&quot;</span><span class="p">);</span> <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">wakeAd3</span> <span class="o">=</span> <span class="nx">advise</span><span class="p">(</span><span class="nx">fred</span><span class="p">,</span> <span class="s2">&quot;wakeUp&quot;</span><span class="p">,</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">before</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;dress up for work&quot;</span><span class="p">);</span> <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p>Notice that after advices attached in the reverse order:</p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">sleepAd1</span> <span class="o">=</span> <span class="nx">advise</span><span class="p">(</span><span class="nx">fred</span><span class="p">,</span> <span class="s2">&quot;sleep&quot;</span><span class="p">,</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">after</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;switch to pajamas&quot;</span><span class="p">);</span> <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">sleepAd2</span> <span class="o">=</span> <span class="nx">advise</span><span class="p">(</span><span class="nx">fred</span><span class="p">,</span> <span class="s2">&quot;sleep&quot;</span><span class="p">,</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">after</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;brush my teeth again&quot;</span><span class="p">);</span> <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">sleepAd3</span> <span class="o">=</span> <span class="nx">advise</span><span class="p">(</span><span class="nx">fred</span><span class="p">,</span> <span class="s2">&quot;sleep&quot;</span><span class="p">,</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">after</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;turn off lights&quot;</span><span class="p">);</span> <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p><code>turn on lights</code><br>
<code>brush my teeth</code><br>
<code>dress up for work</code></p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">fred</span><span class="p">.</span><span class="nx">wakeUp</span><span class="p">();</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p><code>switch to pajamas</code><br>
<code>brush my teeth again</code><br>
<code>turn off lights</code></p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">fred</span><span class="p">.</span><span class="nx">sleep</span><span class="p">();</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p>Let&rsquo;s save on electricity:</p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">wakeAd1</span><span class="p">.</span><span class="nx">unadvise</span><span class="p">();</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p>Brushing teeth more than once a day is overrated, right?</p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">sleepAd1</span><span class="p">.</span><span class="nx">unadvise</span><span class="p">();</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p>No need to dress up for work either &ndash; our Fred is CEO!</p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">wakeAd3</span><span class="p">.</span><span class="nx">unadvise</span><span class="p">();</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p><code>brush my teeth</code></p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">fred</span><span class="p">.</span><span class="nx">wakeUp</span><span class="p">();</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p><code>switch to pajamas</code><br>
<code>turn off lights</code></p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">fred</span><span class="p">.</span><span class="nx">sleep</span><span class="p">();</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p>Again, for convenience, <a href="./advise_js">dcl/advise</a>
provides shortcuts for singular advices.</p>

<p>Naturally &ldquo;around&rdquo; advices use the same double function
technique to be super light-weight.</p>

<h2>Debugging helpers</h2>

<p>There is a special module <a href="./debug_js">dcl/debug</a>
that adds better error checking and reporting for
your &ldquo;classes&rdquo; and objects. All you need is to require it,
and it will plug right in:</p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">dclDebug</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;dcl/debug&quot;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p>In order to use it to its fullest, we should include
a static class id in our &ldquo;class&rdquo; definitions like so:</p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">OurClass</span> <span class="o">=</span> <span class="nx">dcl</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">declaredClass</span><span class="o">:</span> <span class="s2">&quot;OurClass&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p>The rest of definitions goes there.
It is skipped here for simplicity.</p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p>It is strongly suggested to specify <code>declaredClass</code>
for every declaration in every real project.</p>

<p>This <code>declaredClass</code> can be any unique string,
but by convention it should be a human-readable
name of your &ldquo;class&rdquo;, which possibly indicates
where this class can be found.</p>

<p>For example, if you follow the convention
&ldquo;one class per file&rdquo; it can be something like
<code>"myProject/SubDir/FileName"</code>. If you define
several &ldquo;classes&rdquo; per file you can use
a following schema:
<code>"myProject/SubDir/FileName/ClassName"</code>.</p>

<p>Remember that this name is for you and users of your code,
it will be reported in error messages and logs.
The debug module can log constructors and objects created
by those constructors.</p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">A</span> <span class="o">=</span> <span class="nx">dcl</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">declaredClass</span><span class="o">:</span> <span class="s2">&quot;A&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">sleep</span><span class="o">:</span> <span class="nx">dcl</span><span class="p">.</span><span class="nx">after</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;*zzzzzzzzzzzzz*&quot;</span><span class="p">);</span>
</span><span class='line'>  <span class="p">})</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">B</span> <span class="o">=</span> <span class="nx">dcl</span><span class="p">(</span><span class="nx">A</span><span class="p">,</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">declaredClass</span><span class="o">:</span> <span class="s2">&quot;B&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">sleep</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Time to hit the pillow!&quot;</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">george</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">B</span><span class="p">();</span>
</span><span class='line'><span class="nx">advise</span><span class="p">.</span><span class="nx">after</span><span class="p">(</span><span class="nx">george</span><span class="p">,</span> <span class="s2">&quot;sleep&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;*ZzZzZzZzZzZzZ*&quot;</span><span class="p">)</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p><code>Time to hit the pillow!</code><br>
<code>*zzzzzzzzzzzzz*</code><br>
<code>*ZzZzZzZzZzZzZ*</code></p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">george</span><span class="p">.</span><span class="nx">sleep</span><span class="p">();</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p>Now we can inspect all our objects:</p>

<p><code>*** class A depends on 0 classes</code><br>
<code>   class method constructor is CHAINED AFTER (length: 0)</code><br>
<code>   class method sleep is UNCHAINED BUT CONTAINS ADVICE(S),</code><br>
<code>     and has an AOP stub (before: 0, around: 0, after: 1)</code></p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">dclDebug</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">A</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p><code>*** class B depends on 1 classes</code><br>
<code>   dependencies: A</code><br>
<code>   class method constructor is CHAINED AFTER (length: 0)</code><br>
<code>   class method sleep is UNCHAINED BUT CONTAINS ADVICE(S),</code><br>
<code>     and has an AOP stub (before: 0, around: 1, after: 1)</code></p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">dclDebug</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">B</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p><code>*** object of class B</code><br>
<code>*** class B depends on 1 classes</code><br>
<code>   dependencies: A</code><br>
<code>   class method constructor is CHAINED AFTER (length: 0)</code><br>
<code>   class method sleep is UNCHAINED BUT CONTAINS ADVICE(S),</code><br>
<code>     and has an AOP stub (before: 0, around: 1, after: 1)</code><br>
<code>   object method sleep has an AOP stub (before: 0, around: 1, after: 2)</code></p>

<figure class='code'><figcaption><span>file.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">dclDebug</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">george</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<div class='docco-section-end'></div>


<p>This way we can always know that we generated
correct classes, inspect static chaining and advices,
and even can monitor dynamically attached/removed advices.</p>

<h2>Summary</h2>

<p>The ultimate goal of <code>dcl</code> is to provide a solid OOP/AOP foundation
for your projects. Using mixins you can decompose a project into
a small set of simple orthogonal pieces, and glue them together
with supercalls, chains, and advices reducing the overall codebase.</p>

<p>This tutorial just scratched the surface of what <code>dcl</code> can do.
You will find more examples, explanations, and new features
in <a href="../docs">the documentation</a>.</p>

<p>Happy hacking! Go small and keep your code
<a href="http://en.wikipedia.org/wiki/Don%27t_repeat_yourself">DRY</a>!</p>

</div>

  
    <footer>
      <p class="meta">
        
        




<time class='entry-date' datetime='2012-07-29T00:01:00-05:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>29</span><span class='date-suffix'>th</span>, <span class='date-year'>2012</span></span> <span class='time'>12:01 am</span></time>
        
      </p>
      
        

      
    </footer>
  
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Social</h1>
  <p><code>dcl</code> on <a href="https://plus.google.com/+dcljs-oop-aop" rel="publisher">Google+</a>.<br>
  <code>dcl</code> on <a href="https://twitter.com/dcl_js">Twitter</a>.</p>
</section>

<section class="googleplus googleplus-hidden">
  <h1>
    <a href="https://plus.google.com/109185893580826547067?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>


<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2017/06/09/new-major-release-2-dot-0/">New major release: 2.0</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/04/06/1-dot-1-3-micro-update/">1.1.3: micro update</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/12/28/1-dot-1-2-technical-release/">1.1.2: technical release</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/11/05/micro-update-1-dot-1-1/">Micro update: 1.1.1</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/10/04/1-dot-1-legacy/">1.1: legacy</a>
      </li>
    
  </ul>
</section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2017 - Eugene Lazutkin -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


<!-- Start of StatCounter Code for Default Guide -->
<script type="text/javascript">var sc_project=8158109, sc_invisible= 1, sc_security="13e920e4";</script>
<script type="text/javascript" src="http://www.statcounter.com/counter/counter.js"></script>
<noscript>
	<div class="statcounter">
		<a title="tumblr hit tracking tool" href="http://statcounter.com/tumblr/" target="_blank">
			<img class="statcounter" src="http://c.statcounter.com/8158109/0/13e920e4/1/" alt="tumblr hit tracking tool">
		</a>
	</div>
</noscript>
<!-- End of StatCounter Code for Default Guide -->


</body>
</html>
